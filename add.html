<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>宿題追加</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="card slide-up">
<h2>➕ 宿題追加</h2>

<label>教科</label>
<select id="subject">
  <option>国語</option><option>算数</option><option>理科</option>
  <option>社会</option><option>英語</option><option>音楽</option>
  <option>美術</option><option>保体</option><option>その他</option>
</select>

<label>内容</label>
<textarea id="text"></textarea>

<label>期限</label>
<input type="date" id="date">

<button id="add">追加</button>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script src="liff.js"></script>
<script src="api.js"></script>
<script>
(async()=>{
  await initLiff();
  document.getElementById("add").onclick=async()=>{
    await api("addHomework",{
      subject:subject.value,
      text:`${subject.value}:${text.value}（期限${date.value}）`,
      date:date.value
    });
    alert("追加しました");
  };
  document.getElementById("reg").onclick = async () => {
  await api("register", { userId: getUserId() });

  document.body.innerHTML = "<h2>登録完了しました</h2>";
  closeLiff(1200);   // 1.2秒後に閉じる
　};
})();
</script>
</body>
</html>
