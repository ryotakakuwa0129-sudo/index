<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>宿題追加</title>
<link rel="stylesheet" href="style.css">
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<div class="container">
  <h1>宿題追加</h1>
  <div class="card">
    <div class="subjects" id="subjects"></div>

    <input id="title" placeholder="内容" style="width:100%;margin-top:15px">
    <input id="date" type="date" style="width:100%;margin-top:10px">

    <button id="save">保存</button>
  </div>
</div>

<script src="liff.js"></script>
<script src="api.js"></script>
<script>
const SUBJECTS = ["国語","数学","理科","社会","英語","保体","美術","音楽","その他"];
let subject = "";

const box = document.getElementById("subjects");
SUBJECTS.forEach(s=>{
  const d = document.createElement("div");
  d.className = "subject";
  d.textContent = s;
  d.onclick = ()=>{
    document.querySelectorAll(".subject").forEach(x=>x.classList.remove("active"));
    d.classList.add("active");
    subject = s;
  };
  box.appendChild(d);
});

document.getElementById("save").onclick = async()=>{
  await api("addHomework",{
    userId: window.USER_ID,
    subject,
    title: title.value,
    date: date.value
  });
  location.href="done.html";
};
</script>
</body>
</html>

